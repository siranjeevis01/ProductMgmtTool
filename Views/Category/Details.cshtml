@model ProductMgmt.Models.Category

@{
    ViewData["Title"] = "Category Details";
}

<h2 class="mb-4 text-primary fw-bold animate__animated animate__fadeInDown">üìÇ Category Details</h2>

<div class="card shadow-lg border-0 rounded-3 p-4 mb-4 animate__animated animate__fadeIn">
    <div class="mb-3"><strong>Name:</strong> <span class="text-dark">@Model.Name</span></div>
    <div class="mb-3"><strong>Description:</strong> <span class="text-muted">@Model.Description</span></div>
    <div class="mb-3"><strong>Slug:</strong> <code>@Model.Slug</code></div>
    <div class="mb-3"><strong>Created At:</strong> <span>@Model.CreatedAt.ToString("yyyy-MM-dd HH:mm")</span></div>
    @if (Model.UpdatedAt.HasValue)
    {
        <div class="mb-3"><strong>Updated At:</strong> <span>@Model.UpdatedAt.Value.ToString("yyyy-MM-dd HH:mm")</span></div>
    }
    @if (!string.IsNullOrEmpty(Model.ImageUrl))
    {
        <div class="mb-3">
            <strong>Image:</strong><br />
            <img src="@Model.ImageUrl" alt="@Model.Name" class="img-thumbnail" style="max-width:250px;" />
        </div>
    }
</div>

<div class="card shadow-lg border-0 rounded-3 p-4 mb-4 animate__animated animate__fadeInUp">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h4 class="mb-0 text-dark">‚öôÔ∏è Attributes</h4>
        <a asp-controller="Attribute" asp-action="Create" asp-route-categoryId="@Model.Id" 
           class="btn btn-gradient btn-sm">
            <i class="bi bi-plus-circle me-1"></i> Add New Attribute
        </a>
    </div>

    @if (Model.AttributeDefinitions != null && Model.AttributeDefinitions.Any())
    {
        <table class="table table-hover align-middle shadow-sm rounded overflow-hidden">
            <thead class="table-primary">
                <tr>
                    <th>Name</th>
                    <th>Data Type</th>
                    <th>Required</th>
                    <th class="text-center">Actions</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var attr in Model.AttributeDefinitions)
                {
                    <tr class="hover-row">
                        <td class="fw-bold">@attr.Name</td>
                        <td><span class="badge bg-info text-dark">@attr.DataType</span></td>
                        <td>
                            @if (attr.IsRequired)
                            {
                                <span class="badge bg-danger">Required</span>
                            }
                            else
                            {
                                <span class="badge bg-secondary">Optional</span>
                            }
                        </td>
                        <td class="text-center">
                            <a asp-controller="Attribute" asp-action="Edit" asp-route-id="@attr.Id" 
                               class="btn btn-sm btn-warning me-1">
                                <i class="bi bi-pencil-square"></i>
                            </a>
                            <form asp-controller="Attribute" asp-action="Delete" asp-route-id="@attr.Id" 
                                  method="post" style="display:inline">
                                @Html.AntiForgeryToken()
                                <button type="submit" class="btn btn-sm btn-danger" 
                                        onclick="return confirm('Are you sure you want to delete this attribute?');">
                                    <i class="bi bi-trash"></i>
                                </button>
                            </form>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    }
    else
    {
        <p class="text-muted fst-italic">No attributes defined for this category yet.</p>
    }
</div>

<div class="mb-4">
    <a class="btn btn-warning me-2" asp-action="Edit" asp-route-id="@Model.Id">
        <i class="bi bi-pencil"></i> Edit Category
    </a>
    <a class="btn btn-danger me-2" asp-action="Delete" asp-route-id="@Model.Id" 
       onclick="return confirm('Are you sure you want to delete this category?');">
        <i class="bi bi-trash"></i> Delete Category
    </a>
    <a class="btn btn-secondary" asp-action="Index">
        <i class="bi bi-arrow-left-circle"></i> Back to List
    </a>
</div>

<style>
.btn-gradient {
    background: linear-gradient(135deg, #007bff, #6610f2);
    color: #fff;
    border: none;
    transition: 0.3s ease;
}
.btn-gradient:hover {
    background: linear-gradient(135deg, #6610f2, #007bff);
    transform: scale(1.05);
}
.hover-row:hover {
    background: #f8f9fa;
    transform: scale(1.02);
    transition: all 0.3s ease;
}
.table {
    border-radius: 12px;
}
</style>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
